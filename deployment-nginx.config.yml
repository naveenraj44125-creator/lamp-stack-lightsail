# AWS Configuration
aws:
  region: us-east-1

# Lightsail Instance Configuration
lightsail:
  instance_name: nginx-static-demo-v3
  static_ip: ""  # Will be fetched automatically from AWS
  
  # Instance size configuration (optional)
  # If not specified, defaults are: nano_3_0 (512MB) for traditional apps, small_3_0 (2GB) for Docker apps
  # Static sites with Nginx are very lightweight and work well with minimal resources
  # Available bundles: nano_3_0, micro_3_0, small_3_0, medium_3_0, large_3_0, xlarge_3_0, 2xlarge_3_0
  bundle_id: "small_3_0"  # 2GB RAM, 2 vCPU, 60GB SSD - Good performance for static sites
  
# Application Configuration
application:
  name: "nginx-static-site"
  type: "static"
  version: "1.0.0"
  
  # Files to include in deployment package
  package_files:
    - "example-nginx-app/"
  
  # Fallback: include all files if specific files don't exist
  package_fallback: true

# Dependencies Configuration
dependencies:
  nginx:
    enabled: true
    version: "latest"
    config:
      document_root: "/var/www/html"
      enable_gzip: true
      enable_caching: true
  
  git:
    enabled: true
    config:
      install_lfs: false
  
  docker:
    enabled: false  # Set to true to install Docker (for containerized deployments)
    config:
      install_compose: true  # Install Docker Compose alongside Docker
  
  firewall:
    enabled: true
    config:
      allowed_ports:
        - "22"
        - "80"
        - "443"

# Deployment Configuration
deployment:
  timeouts:
    ssh_connection: 120
    command_execution: 300
    health_check: 180
  
  retries:
    max_attempts: 3
    ssh_connection: 5
  
  steps:
    pre_deployment:
      common:
        enabled: true
        update_packages: true
        create_directories: true
      dependencies:
        enabled: true
        install_system_deps: true
        configure_services: true
    
    post_deployment:
      common:
        enabled: true
        verify_extraction: true
        cleanup_temp_files: true
      dependencies:
        enabled: true
        configure_application: true
        set_permissions: true
        restart_services: true
    
    verification:
      enabled: true
      health_check: true
      external_connectivity: true
      endpoints_to_test:
        - "/"

# GitHub Actions Configuration
github_actions:
  triggers:
    push_branches:
      - main
      - master
    pull_request_branches:
      - main
      - master
    workflow_dispatch: true
  
  jobs:
    test:
      enabled: true
    
    deployment:
      deploy_on_push: true
      deploy_on_pr: false
      artifact_retention_days: 1
      create_summary: true

# Monitoring and Logging
monitoring:
  health_check:
    endpoint: "/"
    expected_content: "Nginx"
    max_attempts: 10
    wait_between_attempts: 10
    initial_wait: 30
